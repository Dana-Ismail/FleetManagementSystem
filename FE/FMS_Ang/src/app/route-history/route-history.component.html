<div>
  <h2>Route History</h2>

  <div>
    <label for="vehicleNumber">Select Vehicle Number:</label>
    <select [(ngModel)]="selectedVehicleID" name="vehicleNumber" required>
      <option *ngFor="let vehicle of vehicleIDs" [value]="vehicle.VehicleID">
        {{ vehicle.VehicleNumber }}
      </option>
    </select>
    <button (click)="showAddRouteForm()">Add Route History</button>
  </div>

  <div>
    <label for="epochFrom">Epoch From:</label>
    <input type="number" [(ngModel)]="epochFrom" name="epochFrom" required />
  </div>
  <div>
    <label for="epochTo">Epoch To:</label>
    <input type="number" [(ngModel)]="epochTo" name="epochTo" required />
  </div>
  <button (click)="showRouteHistory()">Show Route History</button>
</div>

<div *ngIf="showAddRouteFormFlag">
  <h3>Add Route History</h3>
  <form (ngSubmit)="addRouteHistory()">
    <div>
      <label for="vehicleDirection">Vehicle Direction:</label>
      <input type="number" [(ngModel)]="newRouteData.vehicleDirection" name="vehicleDirection" required />
    </div>
    <div>
      <label for="status">Status:</label>
      <input type="text" [(ngModel)]="newRouteData.status" name="status" required />
    </div>
    <div>
      <label for="vehicleSpeed">Vehicle Speed:</label>
      <input type="text" [(ngModel)]="newRouteData.vehicleSpeed" name="vehicleSpeed" required />
    </div>
    <div>
      <label for="epoch">Epoch Time:</label>
      <input type="number" [(ngModel)]="newRouteData.epoch" name="epoch" required />
    </div>
    <div>
      <label for="address">Address:</label>
      <input type="text" [(ngModel)]="newRouteData.address" name="address" required />
    </div>
    <div>
      <label for="latitude">Latitude:</label>
      <input type="number" [(ngModel)]="newRouteData.latitude" name="latitude" required />
    </div>
    <div>
      <label for="longitude">Longitude:</label>
      <input type="number" [(ngModel)]="newRouteData.longitude" name="longitude" required />
    </div>
    <button type="submit">Add Route History</button>
  </form>
</div>

<div *ngIf="showRouteHistoryFlag">
  <h3>Route History for {{ selectedVehicleID }}</h3>
  <table>
    <thead>
      <tr>
        <th>Vehicle Direction</th>
        <th>Status</th>
        <th>Vehicle Speed</th>
        <th>GPSTime</th>
        <th>Address</th>
        <th>Latitude</th>
        <th>Longitude</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let route of routeHistory">
        <td>{{ route.VehicleDirection }}</td>
        <td>{{ route.Status }}</td>
        <td>{{ route.VehicleSpeed }}</td>
        <td>{{ route.GPSTime * 1000 | date: 'medium' }}</td>
        <td>{{ route.Address }}</td>
        <td>{{ route.Latitude }}</td>
        <td>{{ route.Longitude }}</td>
      </tr>
    </tbody>
  </table>
</div>

<ng-template #noData>
  <p>No route history available.</p>
</ng-template>
